<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üáØüáµ Viaje a Jap√≥n - Itinerario Interactivo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Arial', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.6;
            transition: background-color 0.3s ease;
        }
        
        .activity-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .activity-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px -8px rgba(0, 0, 0, 0.15);
        }
        
        .day-btn {
            transition: all 0.2s ease;
        }
        
        .day-btn:active {
            transform: scale(0.95);
        }
        
        .gradient-header {
            background: linear-gradient(135deg, #dc2626 0%, #ec4899 100%);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #fef2f2 0%, #ffffff 50%, #fce7f3 100%);
            min-height: 100vh;
        }
        
        .dark .gradient-bg {
            background: linear-gradient(135deg, #1f2937 0%, #111827 50%, #1f2937 100%);
        }
        
        .gradient-budget {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .tab-btn {
            transition: all 0.2s ease;
            position: relative;
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #dc2626, #ec4899);
            border-radius: 2px 2px 0 0;
        }

        .tab-btn.active {
            color: #dc2626;
        }

        .dark .tab-btn.active {
            color: #f87171;
        }

        .train-info {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(4px);
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.2s ease-out;
        }

        .modal-content {
            background: white;
            border-radius: 1rem;
            max-width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dark .modal-content {
            background: #1f2937;
            color: white;
        }

        .checkbox-done {
            opacity: 0.6;
        }

        .checkbox-done .activity-title {
            text-decoration: line-through;
        }

        .floating-btn {
            position: fixed;
            right: 1.5rem;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, #dc2626 0%, #ec4899 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 10px 25px rgba(220, 38, 38, 0.3);
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .floating-btn:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: 0 15px 30px rgba(220, 38, 38, 0.4);
        }

        .floating-btn:active {
            transform: scale(0.95);
        }

        @media (max-width: 768px) {
            .floating-btn {
                width: 48px;
                height: 48px;
                font-size: 1.25rem;
                right: 1rem;
            }
        }

        .region-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .region-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .dark ::-webkit-scrollbar-track {
            background: #374151;
        }

        ::-webkit-scrollbar-thumb {
            background: #dc2626;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #b91c1c;
        }
    </style>
</head>
<body class="gradient-bg">
    
    <!-- Floating Action Buttons -->
    <div class="floating-btn" style="bottom: 7rem;" onclick="TripApp.openModal('budget')" title="Budget Tracker">üí∞</div>
    <div class="floating-btn" style="bottom: 12.5rem;" onclick="TripApp.openModal('phrases')" title="Frases en Japon√©s">üó£Ô∏è</div>
    <div class="floating-btn" style="bottom: 18rem;" onclick="TripApp.openModal('notes')" title="Mis Notas">üìù</div>

    <!-- Header -->
    <div class="gradient-header text-white p-6 shadow-lg">
        <div class="max-w-6xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-start gap-4">
                <div class="flex-1">
                    <h1 class="text-3xl md:text-4xl font-bold mb-2">üáØüáµ Viaje a Jap√≥n</h1>
                    <p class="text-lg md:text-xl opacity-90">2 Hermanos ‚Ä¢ 15 D√≠as ‚Ä¢ Feb 16 - Mar 2, 2025</p>
                    <div class="mt-4 flex flex-wrap gap-3 text-sm md:text-base">
                        <div class="flex items-center gap-2 bg-white/20 rounded-full px-4 py-2 backdrop-blur-sm">
                            <span class="text-xl">üí∞</span>
                            <span>Presupuesto: $100/d√≠a</span>
                        </div>
                        <div class="flex items-center gap-2 bg-white/20 rounded-full px-4 py-2 backdrop-blur-sm">
                            <span class="text-xl">üìç</span>
                            <span class="hidden sm:inline">Tokyo ‚Üí Kyoto ‚Üí Osaka ‚Üí Tokyo</span>
                            <span class="sm:hidden">TKY‚ÜíKYO‚ÜíOSA</span>
                        </div>
                        <div class="flex items-center gap-2 bg-white/20 rounded-full px-4 py-2 backdrop-blur-sm">
                            <span class="text-xl">‚è∞</span>
                            <span id="countdown">Calculando...</span>
                        </div>
                    </div>
                </div>
                <div class="flex gap-2">
                    <button onclick="TripApp.toggleDarkMode()" class="bg-white/20 hover:bg-white/30 rounded-lg px-4 py-2 transition backdrop-blur-sm" aria-label="Toggle dark mode">
                        <span id="darkModeIcon">üåô</span>
                    </button>
                    <button onclick="TripApp.openModal('emergency')" class="bg-red-500/80 hover:bg-red-600 rounded-lg px-4 py-2 transition">
                        üö® SOS
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tabs Navigation -->
    <div class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-20 shadow-sm">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex gap-1 overflow-x-auto scrollbar-hide">
                <button onclick="TripApp.switchTab('itinerary')" id="tab-itinerary" class="tab-btn active px-4 md:px-6 py-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap text-sm md:text-base">
                    üìÖ Itinerario
                </button>
                <button onclick="TripApp.switchTab('map')" id="tab-map" class="tab-btn px-4 md:px-6 py-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap text-sm md:text-base">
                    üó∫Ô∏è Mapa
                </button>
                <button onclick="TripApp.switchTab('flights')" id="tab-flights" class="tab-btn px-4 md:px-6 py-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap text-sm md:text-base">
                    ‚úàÔ∏è Vuelos
                </button>
                <button onclick="TripApp.switchTab('foodregions')" id="tab-foodregions" class="tab-btn px-4 md:px-6 py-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap text-sm md:text-base">
                    üçú Comida
                </button>
                <button onclick="TripApp.switchTab('souvenirs')" id="tab-souvenirs" class="tab-btn px-4 md:px-6 py-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap text-sm md:text-base">
                    üéÅ Souvenirs
                </button>
                <button onclick="TripApp.switchTab('utils')" id="tab-utils" class="tab-btn px-4 md:px-6 py-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap text-sm md:text-base">
                    üõ†Ô∏è Utilidades
                </button>
            </div>
        </div>
    </div>

    <!-- ITINERARY TAB -->
    <div id="content-itinerary" class="tab-content">
        <div class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-16 z-10 shadow-sm">
            <div class="max-w-6xl mx-auto p-4">
                <div class="flex gap-2 overflow-x-auto pb-2" id="daySelector"></div>
            </div>
        </div>

        <div class="max-w-6xl mx-auto p-4 md:p-6">
            <div class="grid md:grid-cols-3 gap-6">
                <div class="md:col-span-1">
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sticky top-32" id="dayOverview">
                        <div class="flex justify-center items-center py-8">
                            <div class="animate-pulse text-gray-400">Cargando...</div>
                        </div>
                    </div>
                </div>

                <div class="md:col-span-2">
                    <div class="space-y-4" id="activitiesTimeline"></div>
                </div>
            </div>

            <div class="mt-8 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-6 rounded-r-xl shadow-md">
                <div class="flex items-start gap-3">
                    <span class="text-2xl flex-shrink-0">‚ö†Ô∏è</span>
                    <div>
                        <h3 class="font-bold text-yellow-800 dark:text-yellow-200 mb-3 text-lg">Notas Importantes</h3>
                        <ul class="space-y-2 text-sm text-yellow-900 dark:text-yellow-100">
                            <li class="flex gap-2"><span>‚Ä¢</span><span><strong>Pokemon Cafe:</strong> Reservas abren a las 6:00 PM JST, 31 d√≠as antes. ¬°Se agotan en minutos!</span></li>
                            <li class="flex gap-2"><span>‚Ä¢</span><span><strong>Kirby Cafe:</strong> Reservas el d√≠a 10 de cada mes para el mes siguiente. ¬°Segundos!</span></li>
                            <li class="flex gap-2"><span>‚Ä¢</span><span><strong>Suica Card:</strong> Compra inmediatamente en Narita Airport.</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mt-8 gradient-budget text-white p-6 rounded-xl shadow-lg">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold">üí∞ Resumen de Presupuesto</h3>
                    <button onclick="TripApp.openModal('budget')" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition backdrop-blur-sm">
                        Ver Tracker ‚Üí
                    </button>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="bg-white/20 backdrop-blur-sm rounded-lg p-4">
                        <p class="text-sm opacity-90 mb-1">Total por persona</p>
                        <p class="text-3xl font-bold">$1,138</p>
                        <p class="text-xs opacity-75 mt-1">15 d√≠as</p>
                    </div>
                    <div class="bg-white/20 backdrop-blur-sm rounded-lg p-4">
                        <p class="text-sm opacity-90 mb-1">Promedio diario</p>
                        <p class="text-3xl font-bold">$76</p>
                        <p class="text-xs opacity-75 mt-1">por d√≠a</p>
                    </div>
                    <div class="bg-white/20 backdrop-blur-sm rounded-lg p-4">
                        <p class="text-sm opacity-90 mb-1">Total 2 personas</p>
                        <p class="text-3xl font-bold">$2,276</p>
                        <p class="text-xs opacity-75 mt-1">ambos hermanos</p>
                    </div>
                    <div class="bg-white/20 backdrop-blur-sm rounded-lg p-4">
                        <p class="text-sm opacity-90 mb-1">Gastado</p>
                        <p class="text-3xl font-bold" id="totalSpent">$0</p>
                        <p class="text-xs opacity-75 mt-1">tracking activo</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MAP TAB -->
    <div id="content-map" class="tab-content hidden">
        <div class="max-w-6xl mx-auto p-4 md:p-6">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-white">üó∫Ô∏è Ubicaciones del Viaje</h2>
                <p class="text-gray-600 dark:text-gray-400 mb-6">Click en cualquier lugar para abrirlo en Google Maps üìç</p>
                
                <div class="mb-8">
                    <h3 class="text-xl font-bold mb-4 text-gray-800 dark:text-white flex items-center gap-2">üè® Hoteles</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <a href="https://www.google.com/maps/search/Hotel+Tokyo+Papa+Shinjuku+Gyoemmae" target="_blank" rel="noopener" class="p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border-l-4 border-red-500 hover:shadow-lg transition">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="font-bold text-gray-800 dark:text-white">Hotel Tokyo Papa Shinjuku</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Feb 16-19 (D√≠as 1-3)</p>
                                    <p class="text-xs text-gray-500 mt-1">üìç Shinjuku-Gyoemmae, Tokyo</p>
                                </div>
                                <span class="text-2xl">üó∫Ô∏è</span>
                            </div>
                        </a>
                        <a href="https://www.google.com/maps/search/Tune+Stay+Kyoto" target="_blank" rel="noopener" class="p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border-l-4 border-purple-500 hover:shadow-lg transition">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="font-bold text-gray-800 dark:text-white">Tune Stay Kyoto</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Feb 19-21 (D√≠as 4-5)</p>
                                    <p class="text-xs text-gray-500 mt-1">üìç 5 min de Kyoto Station</p>
                                </div>
                                <span class="text-2xl">üó∫Ô∏è</span>
                            </div>
                        </a>
                        <a href="https://www.google.com/maps/search/Toyoko+Inn+Osaka+Namba" target="_blank" rel="noopener" class="p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border-l-4 border-orange-500 hover:shadow-lg transition">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="font-bold text-gray-800 dark:text-white">Toyoko Inn Osaka Namba</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Feb 21-24 (D√≠as 6-7)</p>
                                    <p class="text-xs text-gray-500 mt-1">üìç 10 min de Dotonbori</p>
                                </div>
                                <span class="text-2xl">üó∫Ô∏è</span>
                            </div>
                        </a>
                        <a href="https://www.google.com/maps/search/Hotel+Apa+Yamanote+Otsuka+Station" target="_blank" rel="noopener" class="p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border-l-4 border-red-500 hover:shadow-lg transition">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="font-bold text-gray-800 dark:text-white">Hotel Apa Yamanote Otsuka</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Feb 24-Mar 2 (D√≠as 8-15)</p>
                                    <p class="text-xs text-gray-500 mt-1">üìç Otsuka Station, Tokyo</p>
                                </div>
                                <span class="text-2xl">üó∫Ô∏è</span>
                            </div>
                        </a>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="text-xl font-bold mb-4 text-gray-800 dark:text-white flex items-center gap-2">‚≠ê Atracciones Principales</h3>
                    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-3">
                        <a href="https://www.google.com/maps/search/Shibuya+Crossing+Tokyo" target="_blank" rel="noopener" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:shadow-md transition flex items-center gap-3">
                            <span class="text-2xl">üö∂</span>
                            <div class="min-w-0">
                                <p class="font-semibold dark:text-white truncate">Shibuya Crossing</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Tokyo ‚Ä¢ D√≠a 3</p>
                            </div>
                        </a>
                        <a href="https://www.google.com/maps/search/Shibuya+Sky+Tokyo" target="_blank" rel="noopener" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:shadow-md transition flex items-center gap-3">
                            <span class="text-2xl">üåÜ</span>
                            <div class="min-w-0">
                                <p class="font-semibold dark:text-white truncate">Shibuya Sky</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Tokyo ‚Ä¢ D√≠a 3</p>
                            </div>
                        </a>
                        <a href="https://www.google.com/maps/search/Kamakura+Great+Buddha" target="_blank" rel="noopener" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:shadow-md transition flex items-center gap-3">
                            <span class="text-2xl">üóø</span>
                            <div class="min-w-0">
                                <p class="font-semibold dark:text-white truncate">Great Buddha</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Kamakura ‚Ä¢ D√≠a 2</p>
                            </div>
                        </a>
                        <a href="https://www.google.com/maps/search/Fushimi+Inari+Taisha+Kyoto" target="_blank" rel="noopener" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:shadow-md transition flex items-center gap-3">
                            <span class="text-2xl">‚õ©Ô∏è</span>
                            <div class="min-w-0">
                                <p class="font-semibold dark:text-white truncate">Fushimi Inari</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Kyoto ‚Ä¢ D√≠a 5</p>
                            </div>
                        </a>
                        <a href="https://www.google.com/maps/search/Arashiyama+Bamboo+Grove+Kyoto" target="_blank" rel="noopener" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:shadow-md transition flex items-center gap-3">
                            <span class="text-2xl">üéã</span>
                            <div class="min-w-0">
                                <p class="font-semibold dark:text-white truncate">Bamboo Forest</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Kyoto ‚Ä¢ D√≠a 6</p>
                            </div>
                        </a>
                        <a href="https://www.google.com/maps/search/Dotonbori+Osaka" target="_blank" rel="noopener" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:shadow-md transition flex items-center gap-3">
                            <span class="text-2xl">üåÉ</span>
                            <div class="min-w-0">
                                <p class="font-semibold dark:text-white truncate">Dotonbori</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Osaka ‚Ä¢ D√≠a 6</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FLIGHTS TAB -->
    <div id="content-flights" class="tab-content hidden">
        <div class="max-w-4xl mx-auto p-4 md:p-6">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-white">‚úàÔ∏è Informaci√≥n de Vuelos</h2>
                
                <div class="mb-6 p-6 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl border-l-4 border-blue-500">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-3xl">üõ´</span>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 dark:text-white">Ida: Costa Rica ‚Üí Jap√≥n</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Domingo, 16 de Febrero 2025</p>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-bold text-gray-800 dark:text-white">Vuelo AM58</span>
                            <span class="text-sm bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200 px-3 py-1 rounded-full font-semibold">Aerom√©xico</span>
                        </div>
                        <div class="grid grid-cols-3 gap-4 text-sm dark:text-gray-300">
                            <div>
                                <p class="text-gray-500 dark:text-gray-400">Salida</p>
                                <p class="font-semibold">MTY</p>
                            </div>
                            <div class="text-center">
                                <p class="text-gray-500 dark:text-gray-400">‚Üí</p>
                            </div>
                            <div class="text-right">
                                <p class="text-gray-500 dark:text-gray-400">Llegada</p>
                                <p class="font-semibold text-green-600 dark:text-green-400">NRT 6:30 AM</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="p-6 bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-xl border-l-4 border-orange-500">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-3xl">üõ¨</span>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 dark:text-white">Regreso: Jap√≥n ‚Üí Costa Rica</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Domingo, 2 de Marzo 2025</p>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-bold text-gray-800 dark:text-white">Vuelo AM58</span>
                            <span class="text-sm bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-200 px-3 py-1 rounded-full font-semibold">Aerom√©xico</span>
                        </div>
                        <div class="mt-3 p-3 bg-red-50 dark:bg-red-900/30 rounded border-l-4 border-red-500">
                            <p class="text-sm font-semibold text-red-700 dark:text-red-300">‚ö†Ô∏è ¬°IMPORTANTE!</p>
                            <p class="text-xs text-red-600 dark:text-red-400 mt-1">Wake up: 4:30 AM ‚Ä¢ Salida hotel: 5:30 AM ‚Ä¢ Vuelo: 9:30 AM</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOD BY REGION TAB -->
    <div id="content-foodregions" class="tab-content hidden">
        <div class="max-w-6xl mx-auto p-4 md:p-6">
            <h2 class="text-3xl font-bold mb-2 text-gray-800 dark:text-white">üç± Comida Japonesa por Regi√≥n</h2>
            <p class="text-gray-600 dark:text-gray-400 mb-6">Explora los platos t√≠picos de cada regi√≥n y sus rangos de precio por persona</p>
            
            <div class="space-y-6">
                <div class="region-card bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-red-500">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">üóº</span>
                        <h3 class="text-2xl font-bold text-red-600 dark:text-red-400">Tokyo</h3>
                    </div>
                    <ul class="space-y-3 text-gray-700 dark:text-gray-300">
                        <li class="flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            <span class="text-2xl flex-shrink-0">üç£</span>
                            <div class="flex-1">
                                <p class="font-bold">Sushi Edomae</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">¬•2,000‚Äì¬•10,000 ‚Ä¢ Sushi Dai (Toyosu Market)</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            <span class="text-2xl flex-shrink-0">ü•û</span>
                            <div class="flex-1">
                                <p class="font-bold">Monjayaki</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">¬•800‚Äì¬•1,500 ‚Ä¢ Tsukishima Monja Street</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            <span class="text-2xl flex-shrink-0">üç§</span>
                            <div class="flex-1">
                                <p class="font-bold">Tempura</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">¬•1,500‚Äì¬•5,000 ‚Ä¢ Tenmatsu Ginza</p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="region-card bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-purple-500">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">‚õ©Ô∏è</span>
                        <h3 class="text-2xl font-bold text-purple-600 dark:text-purple-400">Kyoto</h3>
                    </div>
                    <ul class="space-y-3 text-gray-700 dark:text-gray-300">
                        <li class="flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            <span class="text-2xl flex-shrink-0">üç±</span>
                            <div class="flex-1">
                                <p class="font-bold">Kaiseki Ryori</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">¬•5,000‚Äì¬•15,000 ‚Ä¢ Gion Karyo</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            <span class="text-2xl flex-shrink-0">üç≤</span>
                            <div class="flex-1">
                                <p class="font-bold">Yudofu (Tofu caliente)</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">¬•1,000‚Äì¬•2,000 ‚Ä¢ Nanzenji Junsei</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            <span class="text-2xl flex-shrink-0">üçµ</span>
                            <div class="flex-1">
                                <p class="font-bold">Matcha y Wagashi</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">¬•500‚Äì¬•1,500 ‚Ä¢ Ippodo Tea Co.</p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="region-card bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-orange-500">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">üèØ</span>
                        <h3 class="text-2xl font-bold text-orange-600 dark:text-orange-400">Osaka</h3>
                    </div>
                    <ul class="space-y-3 text-gray-700 dark:text-gray-300">
                        <li class="flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            <span class="text-2xl flex-shrink-0">üêô</span>
                            <div class="flex-1">
                                <p class="font-bold">Takoyaki</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">¬•400‚Äì¬•800 ‚Ä¢ Wanaka Dotonbori</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            <span class="text-2xl flex-shrink-0">ü•û</span>
                            <div class="flex-1">
                                <p class="font-bold">Okonomiyaki</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">¬•800‚Äì¬•1,500 ‚Ä¢ Mizuno</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            <span class="text-2xl flex-shrink-0">üç¢</span>
                            <div class="flex-1">
                                <p class="font-bold">Kushikatsu</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">¬•1,000‚Äì¬•2,000 ‚Ä¢ Daruma Shinsekai</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- SOUVENIRS TAB -->
    <div id="content-souvenirs" class="tab-content hidden">
        <div class="max-w-6xl mx-auto p-4 md:p-6">
            <h2 class="text-3xl font-bold mb-2 text-gray-800 dark:text-white">üéÅ Souvenirs Japoneses</h2>
            <p class="text-gray-600 dark:text-gray-400 mb-6">Los recuerdos m√°s populares y d√≥nde encontrarlos</p>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-t-4 border-yellow-500">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">üéé</span>
                        <h3 class="text-xl font-bold text-yellow-600 dark:text-yellow-400">Tradicionales</h3>
                    </div>
                    <ul class="space-y-3 text-sm text-gray-700 dark:text-gray-300">
                        <li class="flex items-start gap-2">
                            <span class="text-lg">üå∏</span>
                            <div>
                                <p class="font-semibold">Abanicos japoneses</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Tiendas de artesan√≠a en Kyoto</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-lg">üëò</span>
                            <div>
                                <p class="font-semibold">Furoshiki (telas de envolver)</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Asakusa, Nakamise Street</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-lg">ü•¢</span>
                            <div>
                                <p class="font-semibold">Palillos decorativos</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Don Quijote, Daiso</p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-t-4 border-pink-500">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">üê±</span>
                        <h3 class="text-xl font-bold text-pink-600 dark:text-pink-400">Kawaii</h3>
                    </div>
                    <ul class="space-y-3 text-sm text-gray-700 dark:text-gray-300">
                        <li class="flex items-start gap-2">
                            <span class="text-lg">üß∏</span>
                            <div>
                                <p class="font-semibold">Peluches de personajes</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Pok√©mon Center, Sanrio</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-lg">‚úèÔ∏è</span>
                            <div>
                                <p class="font-semibold">Papeler√≠a adorable</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Loft, Tokyu Hands</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-lg">üëú</span>
                            <div>
                                <p class="font-semibold">Accesorios de moda</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Takeshita Street, WEGO</p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-t-4 border-blue-500">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">üìö</span>
                        <h3 class="text-xl font-bold text-blue-600 dark:text-blue-400">Anime & Manga</h3>
                    </div>
                    <ul class="space-y-3 text-sm text-gray-700 dark:text-gray-300">
                        <li class="flex items-start gap-2">
                            <span class="text-lg">üé≠</span>
                            <div>
                                <p class="font-semibold">Figuras coleccionables</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Akihabara, Mandarake</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-lg">üìñ</span>
                            <div>
                                <p class="font-semibold">Mangas y artbooks</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Animate, Book-Off</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-lg">üîë</span>
                            <div>
                                <p class="font-semibold">Posters y llaveros</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Ikebukuro especializado</p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-t-4 border-green-500">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">üç¨</span>
                        <h3 class="text-xl font-bold text-green-600 dark:text-green-400">Snacks</h3>
                    </div>
                    <ul class="space-y-3 text-sm text-gray-700 dark:text-gray-300">
                        <li class="flex items-start gap-2">
                            <span class="text-lg">üç´</span>
                            <div>
                                <p class="font-semibold">Kit Kat sabores japoneses</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Aeropuertos, Don Quijote</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-lg">üçò</span>
                            <div>
                                <p class="font-semibold">Galletas de arroz (Senbei)</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Konbinis, supermercados</p>
                            </div>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-lg">üçµ</span>
                            <div>
                                <p class="font-semibold">Matcha y dulces tradicionales</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Tiendas de t√© en Kyoto</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="mt-8 p-6 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl border-l-4 border-purple-500">
                <h4 class="font-bold text-lg mb-3 text-gray-800 dark:text-white">üí° Tips para Comprar Souvenirs</h4>
                <ul class="space-y-2 text-sm text-gray-700 dark:text-gray-300">
                    <li class="flex gap-2"><span>‚Ä¢</span><span><strong>Don Quijote:</strong> Abierto 24/7, precios econ√≥micos, gran variedad</span></li>
                    <li class="flex gap-2"><span>‚Ä¢</span><span><strong>100 Yen Shops (Daiso, Seria):</strong> Souvenirs baratos y de calidad</span></li>
                    <li class="flex gap-2"><span>‚Ä¢</span><span><strong>Aeropuerto:</strong> √öltima oportunidad pero m√°s caro</span></li>
                    <li class="flex gap-2"><span>‚Ä¢</span><span><strong>Tax-Free:</strong> Compras sobre ¬•5,000 libres de impuestos (trae pasaporte)</span></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- UTILITIES TAB -->
    <div id="content-utils" class="tab-content hidden">
        <div class="max-w-6xl mx-auto p-4 md:p-6">
            <div class="grid md:grid-cols-2 gap-6">
                
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800 dark:text-white flex items-center gap-2">
                        üí¥ Conversor de Moneda
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2 dark:text-gray-300">USD D√≥lares</label>
                            <input type="number" id="usdInput" class="w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent" placeholder="0.00">
                        </div>
                        <div class="text-center text-2xl text-gray-400">‚áÖ</div>
                        <div>
                            <label class="block text-sm font-medium mb-2 dark:text-gray-300">JPY Yenes</label>
                            <input type="number" id="jpyInput" class="w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent" placeholder="0">
                        </div>
                        <div class="text-sm text-gray-600 dark:text-gray-400 text-center bg-gray-50 dark:bg-gray-700 p-2 rounded">
                            Tasa: 1 USD = <span id="exchangeRate">143</span> JPY
                        </div>
                        <div class="grid grid-cols-3 gap-2">
                            <button onclick="TripApp.quickConvert(10)" class="bg-blue-100 dark:bg-blue-900 p-2 rounded hover:bg-blue-200 dark:hover:bg-blue-800 transition text-sm font-semibold">$10</button>
                            <button onclick="TripApp.quickConvert(50)" class="bg-blue-100 dark:bg-blue-900 p-2 rounded hover:bg-blue-200 dark:hover:bg-blue-800 transition text-sm font-semibold">$50</button>
                            <button onclick="TripApp.quickConvert(100)" class="bg-blue-100 dark:bg-blue-900 p-2 rounded hover:bg-blue-200 dark:hover:bg-blue-800 transition text-sm font-semibold">$100</button>
                        </div>
                    </div>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800 dark:text-white flex items-center gap-2">
                        üå§Ô∏è Clima en Jap√≥n (Febrero)
                    </h3>
                    <div class="space-y-3">
                        <div class="p-4 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 rounded-lg">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="font-bold text-lg dark:text-white">Tokyo</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">5-12¬∞C (41-54¬∞F)</p>
                                </div>
                                <span class="text-4xl">üå§Ô∏è</span>
                            </div>
                        </div>
                        <div class="p-4 bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 rounded-lg">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="font-bold text-lg dark:text-white">Kyoto</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">4-10¬∞C (39-50¬∞F)</p>
                                </div>
                                <span class="text-4xl">‚õÖ</span>
                            </div>
                        </div>
                        <div class="p-4 bg-gradient-to-r from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 rounded-lg">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="font-bold text-lg dark:text-white">Osaka</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">5-11¬∞C (41-52¬∞F)</p>
                                </div>
                                <span class="text-4xl">üå•Ô∏è</span>
                            </div>
                        </div>
                        <div class="mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                            <p class="font-bold mb-3 dark:text-white">üëï Qu√© llevar:</p>
                            <ul class="grid grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-300">
                                <li class="flex items-center gap-2">üß• Abrigo</li>
                                <li class="flex items-center gap-2">üß∂ Su√©teres</li>
                                <li class="flex items-center gap-2">üëñ Pantalones</li>
                                <li class="flex items-center gap-2">‚òÇÔ∏è Paraguas</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800 dark:text-white flex items-center gap-2">
                        ‚ö° Acciones R√°pidas
                    </h3>
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="TripApp.openModal('phrases')" class="p-4 bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition shadow-md hover:shadow-lg">
                            <div class="text-3xl mb-2">üó£Ô∏è</div>
                            <div class="text-sm font-semibold">Frases</div>
                        </button>
                        <button onclick="TripApp.openModal('emergency')" class="p-4 bg-gradient-to-br from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition shadow-md hover:shadow-lg">
                            <div class="text-3xl mb-2">üö®</div>
                            <div class="text-sm font-semibold">SOS</div>
                        </button>
                        <button onclick="TripApp.openModal('budget')" class="p-4 bg-gradient-to-br from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition shadow-md hover:shadow-lg">
                            <div class="text-3xl mb-2">üí∞</div>
                            <div class="text-sm font-semibold">Budget</div>
                        </button>
                        <button onclick="TripApp.openModal('notes')" class="p-4 bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-purple-700 transition shadow-md hover:shadow-lg">
                            <div class="text-3xl mb-2">üìù</div>
                            <div class="text-sm font-semibold">Notas</div>
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- MODALS -->
    
    <!-- Budget Tracker Modal -->
    <div id="modal-budget" class="modal" role="dialog" aria-labelledby="budget-title">
        <div class="modal-content max-w-2xl">
            <div class="flex justify-between items-center mb-6">
                <h2 id="budget-title" class="text-2xl font-bold dark:text-white">üí∞ Budget Tracker</h2>
                <button onclick="TripApp.closeModal('budget')" class="text-3xl hover:text-red-600 transition" aria-label="Cerrar">&times;</button>
            </div>
            <div class="space-y-4">
                <div class="grid grid-cols-3 gap-4">
                    <div class="bg-green-50 dark:bg-green-900/30 p-4 rounded-lg text-center">
                        <p class="text-sm text-gray-600 dark:text-gray-400">Presupuesto</p>
                        <p class="text-2xl font-bold text-green-600 dark:text-green-400">$3,000</p>
                    </div>
                    <div class="bg-red-50 dark:bg-red-900/30 p-4 rounded-lg text-center">
                        <p class="text-sm text-gray-600 dark:text-gray-400">Gastado</p>
                        <p class="text-2xl font-bold text-red-600 dark:text-red-400" id="modalTotalSpent">$0</p>
                    </div>
                    <div class="bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg text-center">
                        <p class="text-sm text-gray-600 dark:text-gray-400">Restante</p>
                        <p class="text-2xl font-bold text-blue-600 dark:text-blue-400" id="modalRemaining">$3,000</p>
                    </div>
                </div>
                
                <div class="border-t dark:border-gray-600 pt-4">
                    <h3 class="font-bold mb-3 dark:text-white">Agregar Gasto</h3>
                    <form onsubmit="TripApp.addExpense(event)" class="flex gap-2">
                        <input type="number" id="expenseAmount" placeholder="$0" required step="0.01" class="flex-1 p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <input type="text" id="expenseDesc" placeholder="Descripci√≥n" required class="flex-1 p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <button type="submit" class="bg-blue-600 text-white px-4 rounded hover:bg-blue-700 transition">+ Agregar</button>
                    </form>
                </div>

                <div id="expensesList" class="space-y-2 max-h-60 overflow-y-auto"></div>
            </div>
        </div>
    </div>

    <!-- Phrases Modal -->
    <div id="modal-phrases" class="modal" role="dialog" aria-labelledby="phrases-title">
        <div class="modal-content max-w-2xl">
            <div class="flex justify-between items-center mb-6">
                <h2 id="phrases-title" class="text-2xl font-bold dark:text-white">üó£Ô∏è Frases √ötiles en Japon√©s</h2>
                <button onclick="TripApp.closeModal('phrases')" class="text-3xl hover:text-red-600 transition" aria-label="Cerrar">&times;</button>
            </div>
            <div class="space-y-3 max-h-96 overflow-y-auto">
                <div class="p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg">
                    <p class="font-semibold dark:text-white">„Åì„Çì„Å´„Å°„ÅØ (Konnichiwa)</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Hola / Buenos d√≠as</p>
                </div>
                <div class="p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg">
                    <p class="font-semibold dark:text-white">„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô (Arigatou gozaimasu)</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Muchas gracias</p>
                </div>
                <div class="p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg">
                    <p class="font-semibold dark:text-white">„Åô„Åø„Åæ„Åõ„Çì (Sumimasen)</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Disculpe / Perd√≥n</p>
                </div>
                <div class="p-3 bg-red-50 dark:bg-red-900/30 rounded-lg">
                    <p class="font-semibold dark:text-white">„Éà„Ç§„É¨„ÅØ„Å©„Åì„Åß„Åô„ÅãÔºü (Toire wa doko desu ka?)</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">¬øD√≥nde est√° el ba√±o?</p>
                </div>
                <div class="p-3 bg-green-50 dark:bg-green-900/30 rounded-lg">
                    <p class="font-semibold dark:text-white">„ÅÑ„Åè„Çâ„Åß„Åô„ÅãÔºü (Ikura desu ka?)</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">¬øCu√°nto cuesta?</p>
                </div>
                <div class="p-3 bg-green-50 dark:bg-green-900/30 rounded-lg">
                    <p class="font-semibold dark:text-white">„Åì„Çå„Çí„Åè„Å†„Åï„ÅÑ (Kore wo kudasai)</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Esto, por favor</p>
                </div>
                <div class="p-3 bg-purple-50 dark:bg-purple-900/30 rounded-lg">
                    <p class="font-semibold dark:text-white">Ëã±Ë™û„ÇíË©±„Åõ„Åæ„Åô„ÅãÔºü (Eigo wo hanasemasu ka?)</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">¬øHabla ingl√©s?</p>
                </div>
                <div class="p-3 bg-orange-50 dark:bg-orange-900/30 rounded-lg">
                    <p class="font-semibold dark:text-white">„Åä‰ºöË®à„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô (Okaikei onegaishimasu)</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">La cuenta, por favor</p>
                </div>
                <div class="p-3 bg-yellow-50 dark:bg-yellow-900/30 rounded-lg">
                    <p class="font-semibold dark:text-white">Âä©„Åë„Å¶ÔºÅ (Tasukete!)</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">¬°Ayuda!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Emergency Modal -->
    <div id="modal-emergency" class="modal" role="dialog" aria-labelledby="emergency-title">
        <div class="modal-content max-w-2xl">
            <div class="flex justify-between items-center mb-6">
                <h2 id="emergency-title" class="text-2xl font-bold text-red-600 dark:text-red-400">üö® Informaci√≥n de Emergencia</h2>
                <button onclick="TripApp.closeModal('emergency')" class="text-3xl hover:text-red-600 transition" aria-label="Cerrar">&times;</button>
            </div>
            <div class="space-y-4">
                <div class="p-4 bg-red-50 dark:bg-red-900/30 rounded-lg border-l-4 border-red-500">
                    <h3 class="font-bold text-lg mb-3 dark:text-white">N√∫meros de Emergencia en Jap√≥n</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="dark:text-gray-300">üöì Polic√≠a:</span>
                            <a href="tel:110" class="text-2xl font-bold text-red-600 dark:text-red-400">110</a>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="dark:text-gray-300">üöë Ambulancia/Bomberos:</span>
                            <a href="tel:119" class="text-2xl font-bold text-red-600 dark:text-red-400">119</a>
                        </div>
                    </div>
                </div>

                <div class="p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg">
                    <h3 class="font-bold mb-2 dark:text-white">üá®üá∑ Embajada de Costa Rica en Jap√≥n</h3>
                    <div class="space-y-1 text-sm dark:text-gray-300">
                        <p>üìû Tel√©fono: <a href="tel:+81-3-3486-1812" class="text-blue-600 dark:text-blue-400 font-semibold">+81-3-3486-1812</a></p>
                        <p>üìç Kowa Bldg. 38, 4-12-24 Nishi-Azabu, Minato-ku, Tokyo</p>
                        <p>‚è∞ Lun-Vie 9:30-12:30, 14:00-17:00</p>
                    </div>
                </div>

                <div class="p-4 bg-green-50 dark:bg-green-900/30 rounded-lg">
                    <h3 class="font-bold mb-2 dark:text-white">üè• Hospitales con Servicio en Ingl√©s</h3>
                    <div class="space-y-2 text-sm dark:text-gray-300">
                        <div>
                            <p class="font-semibold">Tokyo Medical & Surgical Clinic</p>
                            <p>üìû +81-3-3436-3028</p>
                        </div>
                        <div>
                            <p class="font-semibold">Japan Helpline (24/7)</p>
                            <p>üìû 0570-000-911</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notes Modal -->
    <div id="modal-notes" class="modal" role="dialog" aria-labelledby="notes-title">
        <div class="modal-content max-w-2xl">
            <div class="flex justify-between items-center mb-6">
                <h2 id="notes-title" class="text-2xl font-bold dark:text-white">üìù Mis Notas del Viaje</h2>
                <button onclick="TripApp.closeModal('notes')" class="text-3xl hover:text-red-600 transition" aria-label="Cerrar">&times;</button>
            </div>
            <textarea id="notesTextarea" class="w-full h-64 p-4 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent" placeholder="Escribe tus notas aqu√≠...

Ejemplos:
- Restaurantes recomendados que encontraste
- Cosas que no debes olvidar
- Lugares que alguien te recomend√≥
- Recuerdos del viaje"></textarea>
            <button onclick="TripApp.saveNotes()" class="mt-4 w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-semibold transition">
                üíæ Guardar Notas
            </button>
            <p class="text-xs text-gray-500 dark:text-gray-400 mt-2 text-center">Tus notas se guardan en tu dispositivo</p>
        </div>
    </div>

    <!-- Footer -->
    <div class="bg-gray-800 text-white p-8 mt-12">
        <div class="max-w-6xl mx-auto text-center">
            <p class="text-xl font-bold mb-2">¬°Que tengan un viaje incre√≠ble! üéå</p>
            <p class="text-gray-400 mb-4">„ÅÑ„Å£„Å¶„Çâ„Å£„Åó„ÇÉ„ÅÑ (Itterasshai - Have a good trip!)</p>
            <p class="text-xs text-gray-500">Creado con ‚ù§Ô∏è para dos hermanos aventureros</p>
        </div>
    </div>

    <script>
        // Main Application Object - Modular Structure
        const TripApp = {
            // State
            state: {
                currentDay: 1,
                expenses: [],
                checkedActivities: {},
                EXCHANGE_RATE: 143
            },

            // Data
            itinerary: [
                {day: 1, date: "Feb 16 - Dom", title: "Llegada a Tokyo", location: "Shinjuku", hotel: "Hotel Tokyo Papa", budget: 63,
                    activities: [
                        {time: "6:30 AM", icon: "‚úàÔ∏è", title: "Llegada Narita", desc: "Vuelo AM58", cost: 0, id: "1-0"},
                        {time: "8:00 AM", icon: "üöÜ", title: "Narita Express ‚Üí Shinjuku", desc: "Comprar Welcome Suica", cost: 23, train: {from: "Narita Airport T1", to: "Shinjuku Station", line: "Narita Express (N'EX)", duration: "90 min"}, id: "1-1"},
                        {time: "10:30 AM", icon: "üì∏", title: "Shinjuku Gyoen Garden", desc: "Jard√≠n nacional, 2 horas", cost: 3.5, station: "Shinjuku-Gyoemmae (5 min walk)", id: "1-2"},
                        {time: "1:00 PM", icon: "üçú", title: "Ichiran Ramen", desc: "¬°Primer ramen japon√©s!", cost: 9, station: "Shinjuku Station √°rea", id: "1-3"},
                        {time: "4:00 PM", icon: "‚≠ê", title: "Tokyo Metro Govt Building", desc: "Vista panor√°mica GRATIS", cost: 0, station: "Tochomae Station", id: "1-4"},
                        {time: "6:00 PM", icon: "üç¢", title: "Cena Omoide Yokocho", desc: "Yakitori nost√°lgicos", cost: 35, id: "1-5"}
                    ]
                },
                {day: 2, date: "Feb 17 - Lun", title: "Kamakura Day Trip", location: "Kamakura", hotel: "Hotel Tokyo Papa", budget: 72,
                    activities: [
                        {time: "9:00 AM", icon: "üöÜ", title: "JR ‚Üí Kamakura", desc: "57 min directo", cost: 7, train: {from: "Shinjuku", to: "Kamakura", line: "JR Shonan-Shinjuku", duration: "57 min"}, id: "2-0"},
                        {time: "10:15 AM", icon: "‚õ©Ô∏è", title: "Tsurugaoka Hachimangu", desc: "Santuario, gratis", cost: 0, id: "2-1"},
                        {time: "11:30 AM", icon: "üèØ", title: "Hasedera Temple", desc: "Vistas al mar", cost: 3, id: "2-2"},
                        {time: "12:45 PM", icon: "üóø", title: "Great Buddha", desc: "Buda gigante!", cost: 2.5, id: "2-3"},
                        {time: "5:30 PM", icon: "ü•™", title: "AGE.3 Ginza", desc: "S√°ndwiches virales", cost: 10, id: "2-4"},
                        {time: "8:00 PM", icon: "ü•©", title: "Yakiniku Rikimaru", desc: "All-you-can-eat 90min", cost: 26, id: "2-5"}
                    ]
                },
                {day: 3, date: "Feb 18 - Mar", title: "Tokyo Highlights", location: "Tokyo", hotel: "Hotel Tokyo Papa", budget: 70,
                    activities: [
                        {time: "9:00 AM", icon: "‚≠ê", title: "Tokyo Station", desc: "Character Street", cost: 0, id: "3-0"},
                        {time: "11:00 AM", icon: "‚õ©Ô∏è", title: "Sensoji Temple", desc: "Templo + Nakamise", cost: 0, id: "3-1"},
                        {time: "12:30 PM", icon: "üç£", title: "Kaiten Sushi", desc: "Sushi en cinta!", cost: 18, id: "3-2"},
                        {time: "2:30 PM", icon: "üéÆ", title: "Akihabara", desc: "Distrito electr√≥nico", cost: 0, id: "3-3"},
                        {time: "3:30 PM", icon: "‚òï", title: "Cafe Mai:lish", desc: "Steins;Gate cafe", cost: 13, id: "3-4"},
                        {time: "6:00 PM", icon: "üåÜ", title: "Shibuya Sky", desc: "Rooftop 47¬∞ piso", cost: 18, id: "3-5"},
                        {time: "7:30 PM", icon: "üö∂", title: "Shibuya Crossing", desc: "¬°Cruce famoso!", cost: 0, id: "3-6"}
                    ]
                },
                {day: 4, date: "Feb 19 - Mi√©", title: "Tokyo ‚Üí Kyoto", location: "Kyoto", hotel: "Tune Stay Kyoto", budget: 133,
                    activities: [
                        {time: "9:00 AM", icon: "üöÑ", title: "Shinkansen ‚Üí Kyoto", desc: "2h 20min tren bala", cost: 93, train: {from: "Tokyo", to: "Kyoto", line: "Tokaido Shinkansen", duration: "2h 20min"}, id: "4-0"},
                        {time: "11:30 AM", icon: "üè®", title: "Check-in Tune Stay", desc: "5 min de estaci√≥n", cost: 0, id: "4-1"},
                        {time: "1:30 PM", icon: "‚õ©Ô∏è", title: "Nishi Hongan-ji", desc: "UNESCO, gratis", cost: 0, id: "4-2"},
                        {time: "5:00 PM", icon: "üëò", title: "Distrito Gion", desc: "Buscar geishas", cost: 0, id: "4-3"},
                        {time: "6:30 PM", icon: "üç±", title: "Cena Pontocho", desc: "Callej√≥n tradicional", cost: 35, id: "4-4"}
                    ]
                },
                {day: 5, date: "Feb 20 - Jue", title: "Nara Day Trip", location: "Nara", hotel: "Tune Stay Kyoto", budget: 47,
                    activities: [
                        {time: "8:15 AM", icon: "üöÜ", title: "JR ‚Üí Nara", desc: "45 minutos", cost: 5, train: {from: "Kyoto", to: "Nara", line: "JR Nara Line", duration: "45 min"}, id: "5-0"},
                        {time: "9:30 AM", icon: "ü¶å", title: "Nara Park", desc: "¬°Venados!", cost: 1.5, id: "5-1"},
                        {time: "10:30 AM", icon: "üèØ", title: "Todai-ji Temple", desc: "Gran Buda 15m", cost: 6, id: "5-2"},
                        {time: "11:45 AM", icon: "üèÆ", title: "Kasuga Taisha", desc: "Linternas de piedra", cost: 3.5, id: "5-3"},
                        {time: "2:00 PM", icon: "üç°", title: "Nakatanidou Mochi", desc: "Show de mochi!", cost: 1.5, id: "5-4"},
                        {time: "5:30 PM", icon: "‚õ©Ô∏è", title: "Fushimi Inari", desc: "Mil puertas torii", cost: 0, id: "5-5"},
                        {time: "7:30 PM", icon: "üçú", title: "Ramen Kyoto", desc: "Regreso", cost: 11, id: "5-6"}
                    ]
                },
                {day: 6, date: "Feb 21 - Vie", title: "Arashiyama ‚Üí Osaka", location: "Osaka", hotel: "Toyoko Inn Namba", budget: 57,
                    activities: [
                        {time: "8:00 AM", icon: "üöÜ", title: "JR ‚Üí Arashiyama", desc: "15 minutos", cost: 1.7, id: "6-0"},
                        {time: "8:30 AM", icon: "üéã", title: "Bamboo Grove", desc: "¬°Temprano!", cost: 0, id: "6-1"},
                        {time: "9:30 AM", icon: "üèØ", title: "Tenryu-ji Temple", desc: "Jard√≠n zen", cost: 3.5, id: "6-2"},
                        {time: "2:00 PM", icon: "üöÜ", title: "Kyoto ‚Üí Osaka", desc: "29 min JR", cost: 4, id: "6-3"},
                        {time: "6:00 PM", icon: "üêô", title: "Takoyaki Dotonbori", desc: "Wanaka + Kukuru", cost: 6, id: "6-4"},
                        {time: "7:00 PM", icon: "ü•û", title: "Okonomiyaki", desc: "¬°Emblema Osaka!", cost: 12, id: "6-5"},
                        {time: "8:30 PM", icon: "üåÉ", title: "Dotonbori noche", desc: "Glico Man + luces", cost: 0, id: "6-6"}
                    ]
                },
                {day: 7, date: "Feb 22 - S√°b", title: "Osaka Aquarium", location: "Osaka", hotel: "Toyoko Inn Namba", budget: 60,
                    activities: [
                        {time: "7:00 AM", icon: "üç≥", title: "Desayuno hotel", desc: "Buffet incluido", cost: 0, id: "7-0"},
                        {time: "9:45 AM", icon: "üêã", title: "Osaka Aquarium", desc: "Tiburones ballena!", cost: 21, id: "7-1"},
                        {time: "3:30 PM", icon: "üç¢", title: "Kuromon Market", desc: "Comida callejera", cost: 18, id: "7-2"},
                        {time: "5:00 PM", icon: "üõçÔ∏è", title: "Shinsaibashi", desc: "600m tiendas", cost: 0, id: "7-3"},
                        {time: "7:00 PM", icon: "ü•©", title: "Yakiniku 298", desc: "All-you-can-eat!", cost: 28, id: "7-4"}
                    ]
                },
                {day: 8, date: "Feb 23 - Dom", title: "Osaka ‚Üí Tokyo", location: "Tokyo", hotel: "Apa Otsuka", budget: 141,
                    activities: [
                        {time: "9:00 AM", icon: "üöÑ", title: "Shinkansen ‚Üí Tokyo", desc: "2h 40min", cost: 93, id: "8-0"},
                        {time: "12:15 PM", icon: "üè®", title: "Check-in Otsuka", desc: "Frente estaci√≥n", cost: 0, id: "8-1"},
                        {time: "2:30 PM", icon: "üèôÔ∏è", title: "Sunshine City", desc: "Piso 60", cost: 6, id: "8-2"},
                        {time: "7:00 PM", icon: "üçµ", title: "Matcha Ice Cream", desc: "Suzukien 7 niveles", cost: 5, id: "8-3"}
                    ]
                },
                {day: 9, date: "Feb 24 - Lun", title: "Tokyo Libre", location: "Tokyo", hotel: "Apa Otsuka", budget: 63,
                    activities: [
                        {time: "10:00 AM", icon: "üëó", title: "Harajuku", desc: "Moda juvenil", cost: 0, id: "9-0"},
                        {time: "11:00 AM", icon: "‚õ©Ô∏è", title: "Meiji Shrine", desc: "Santuario gratis", cost: 0, id: "9-1"},
                        {time: "12:00 PM", icon: "üêü", title: "Taiyaki original", desc: "Naniwaya (1909)", cost: 2.5, id: "9-2"},
                        {time: "4:00 PM", icon: "‚òï", title: "Artnia Square Enix", desc: "Caf√© Shinjuku", cost: 18, id: "9-3"},
                        {time: "7:30 PM", icon: "üçΩÔ∏è", title: "Cena final", desc: "¬°Tu favorito!", cost: 35, id: "9-4"}
                    ]
                },
                {day: 10, date: "Feb 25 - Mar", title: "D√≠a Libre", location: "Tokyo", hotel: "Apa Otsuka", budget: 70,
                    activities: [{time: "Todo el d√≠a", icon: "üó∫Ô∏è", title: "Actividades sugeridas", desc: "Odaiba, compras, Imperial Palace", cost: 70, id: "10-0"}]
                },
                {day: 11, date: "Feb 26 - Mi√©", title: "D√≠a Libre", location: "Tokyo", hotel: "Apa Otsuka", budget: 70,
                    activities: [{time: "Todo el d√≠a", icon: "üó∫Ô∏è", title: "M√°s exploraci√≥n", desc: "Tsukiji, Roppongi, caf√©s", cost: 70, id: "11-0"}]
                },
                {day: 12, date: "Feb 27 - Jue", title: "D√≠a Libre", location: "Tokyo", hotel: "Apa Otsuka", budget: 70,
                    activities: [{time: "Todo el d√≠a", icon: "‚õ∞Ô∏è", title: "Aventura opcional", desc: "Mt Takao o compras", cost: 70, id: "12-0"}]
                },
                {day: 13, date: "Feb 28 - Vie", title: "D√≠a Libre", location: "Tokyo", hotel: "Apa Otsuka", budget: 70,
                    activities: [{time: "Todo el d√≠a", icon: "üõçÔ∏è", title: "√öltimo d√≠a completo", desc: "Compras finales", cost: 70, id: "13-0"}]
                },
                {day: 14, date: "Mar 1 - S√°b", title: "Preparaci√≥n", location: "Tokyo", hotel: "Apa Otsuka", budget: 56,
                    activities: [
                        {time: "D√≠a entero", icon: "üì¶", title: "D√≠a ligero", desc: "Souvenirs, empacar", cost: 0, id: "14-0"},
                        {time: "6:00 PM", icon: "üçú", title: "Cena temprano", desc: "Dormir temprano", cost: 35, id: "14-1"}
                    ]
                },
                {day: 15, date: "Mar 2 - Dom", title: "Regreso", location: "Aeropuerto", hotel: "Vuelo 9:30 AM", budget: 26,
                    activities: [
                        {time: "4:30 AM", icon: "‚è∞", title: "Wake up!", desc: "√öltima verificaci√≥n", cost: 0, id: "15-0"},
                        {time: "5:30 AM", icon: "üöÜ", title: "Narita Express", desc: "90 min total", cost: 22, id: "15-1"},
                        {time: "9:30 AM", icon: "‚úàÔ∏è", title: "Vuelo AM58", desc: "¬°Sayonara! üëãüáØüáµ", cost: 0, id: "15-2"}
                    ]
                }
            ],

            // Initialization
            init() {
                this.loadState();
                this.setupEventListeners();
                this.selectDay(1);
                this.updateCountdown();
                this.updateBudgetDisplay();
                setInterval(() => this.updateCountdown(), 60000);
            },

            loadState() {
                try {
                    this.state.expenses = JSON.parse(localStorage.getItem('expenses') || '[]');
                    this.state.checkedActivities = JSON.parse(localStorage.getItem('checkedActivities') || '{}');
                    const darkMode = localStorage.getItem('darkMode') === 'true';
                    if (darkMode) {
                        document.documentElement.classList.add('dark');
                        document.getElementById('darkModeIcon').textContent = '‚òÄÔ∏è';
                    }
                } catch (e) {
                    console.error('Error loading state:', e);
                }
            },

            setupEventListeners() {
                // Currency inputs with debouncing
                let currencyTimeout;
                const usdInput = document.getElementById('usdInput');
                const jpyInput = document.getElementById('jpyInput');
                
                usdInput.addEventListener('input', (e) => {
                    clearTimeout(currencyTimeout);
                    currencyTimeout = setTimeout(() => {
                        const usd = parseFloat(e.target.value) || 0;
                        jpyInput.value = Math.round(u
