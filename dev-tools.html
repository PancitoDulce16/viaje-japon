<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üõ†Ô∏è Japitin Dev Tools</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a1a;
            color: #fff;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            font-size: 32px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            color: #888;
            margin-bottom: 30px;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .tool-card {
            background: #2a2a2a;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #333;
        }

        .tool-card h2 {
            font-size: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tool-card h2 span {
            font-size: 24px;
        }

        textarea {
            width: 100%;
            height: 200px;
            background: #1a1a1a;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 12px;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            resize: vertical;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 10px;
            transition: transform 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: #444;
        }

        .btn-danger {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .output {
            background: #1a1a1a;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 12px;
            margin-top: 10px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }

        .output pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .status {
            padding: 8px 12px;
            border-radius: 6px;
            margin-top: 10px;
            font-size: 14px;
        }

        .status.success {
            background: rgba(0, 242, 96, 0.1);
            border: 1px solid rgba(0, 242, 96, 0.3);
            color: #00f260;
        }

        .status.error {
            background: rgba(245, 87, 108, 0.1);
            border: 1px solid rgba(245, 87, 108, 0.3);
            color: #f5576c;
        }

        .file-list {
            list-style: none;
            margin-top: 10px;
        }

        .file-list li {
            padding: 8px;
            background: #1a1a1a;
            margin-bottom: 5px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-list li:hover {
            background: #222;
        }

        .file-list button {
            margin: 0;
            padding: 5px 10px;
            font-size: 12px;
        }

        .live-preview {
            background: #2a2a2a;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #333;
            margin-top: 20px;
        }

        .live-preview iframe {
            width: 100%;
            height: 600px;
            border: 1px solid #444;
            border-radius: 8px;
            background: white;
        }

        .inspector {
            background: #1a1a1a;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            max-height: 400px;
            overflow-y: auto;
        }

        .css-rule {
            background: #2a2a2a;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 3px solid #667eea;
        }

        .css-rule .selector {
            color: #4facfe;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .css-rule .property {
            color: #888;
            font-size: 12px;
            margin-left: 15px;
        }

        .css-rule .property span {
            color: #00f260;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõ†Ô∏è Japitin Dev Tools</h1>
        <p class="subtitle">Herramientas de desarrollo para cambios r√°pidos y eficientes</p>

        <div class="tools-grid">
            <!-- Tool 1: Live CSS Editor -->
            <div class="tool-card">
                <h2><span>üé®</span> Live CSS Editor</h2>
                <p style="color: #888; margin-bottom: 10px; font-size: 14px;">
                    Edita CSS y ve los cambios en tiempo real
                </p>
                <textarea id="liveCss" placeholder="/* Escribe CSS aqu√≠ y se aplicar√° instant√°neamente */
html.dark {
    background-image: url('/images/iconos/Wallpaper/Osucuro.png') !important;
}"></textarea>
                <button onclick="applyLiveCSS()">‚ñ∂Ô∏è Aplicar CSS</button>
                <button class="btn-secondary" onclick="clearLiveCSS()">üóëÔ∏è Limpiar</button>
                <div id="cssStatus"></div>
            </div>

            <!-- Tool 2: Snapshot Manager -->
            <div class="tool-card">
                <h2><span>üíæ</span> Snapshot Manager</h2>
                <p style="color: #888; margin-bottom: 10px; font-size: 14px;">
                    Guarda y restaura estados del proyecto
                </p>
                <input type="text" id="snapshotName" placeholder="Nombre del snapshot"
                       style="width: 100%; padding: 10px; background: #1a1a1a; border: 1px solid #444; border-radius: 6px; color: white; margin-bottom: 10px;">
                <button class="btn-success" onclick="createSnapshot()">üì∏ Crear Snapshot</button>
                <button class="btn-secondary" onclick="listSnapshots()">üìã Ver Snapshots</button>
                <div id="snapshotList"></div>
            </div>

            <!-- Tool 3: CSS Cleaner -->
            <div class="tool-card">
                <h2><span>üßπ</span> CSS Cleaner</h2>
                <p style="color: #888; margin-bottom: 10px; font-size: 14px;">
                    Analiza y limpia CSS duplicado
                </p>
                <button onclick="analyzeCss()">üîç Analizar CSS</button>
                <button class="btn-danger" onclick="cleanDuplicates()">üóëÔ∏è Limpiar Duplicados</button>
                <div id="cleanerOutput" class="output" style="display: none;"></div>
            </div>

            <!-- Tool 4: Visual Debugger -->
            <div class="tool-card">
                <h2><span>üîç</span> Visual Inspector</h2>
                <p style="color: #888; margin-bottom: 10px; font-size: 14px;">
                    Inspecciona qu√© CSS se est√° aplicando
                </p>
                <input type="text" id="inspectSelector" placeholder="Selector CSS (ej: html.dark)"
                       style="width: 100%; padding: 10px; background: #1a1a1a; border: 1px solid #444; border-radius: 6px; color: white; margin-bottom: 10px;">
                <button onclick="inspectElement()">üîé Inspeccionar</button>
                <div id="inspectorOutput" class="inspector" style="display: none;"></div>
            </div>
        </div>

        <!-- Live Preview -->
        <div class="live-preview">
            <h2 style="margin-bottom: 15px;">üëÅÔ∏è Vista Previa en Vivo</h2>
            <iframe id="preview" src="/dashboard.html"></iframe>
        </div>
    </div>

    <script>
        // Live CSS Editor
        let liveStyleElement = null;

        function applyLiveCSS() {
            const css = document.getElementById('liveCss').value;
            const preview = document.getElementById('preview').contentWindow.document;

            if (!liveStyleElement) {
                liveStyleElement = preview.createElement('style');
                liveStyleElement.id = 'live-css-editor';
                preview.head.appendChild(liveStyleElement);
            }

            liveStyleElement.textContent = css;

            showStatus('cssStatus', 'CSS aplicado correctamente ‚úÖ', 'success');
        }

        function clearLiveCSS() {
            document.getElementById('liveCss').value = '';
            if (liveStyleElement) {
                liveStyleElement.textContent = '';
            }
            showStatus('cssStatus', 'CSS limpiado', 'success');
        }

        // Snapshot Manager
        function createSnapshot() {
            const name = document.getElementById('snapshotName').value || `snapshot-${Date.now()}`;
            const data = {
                timestamp: new Date().toISOString(),
                css: getAllCSS(),
                html: document.getElementById('preview').contentWindow.document.documentElement.outerHTML
            };

            localStorage.setItem(`japitin-snapshot-${name}`, JSON.stringify(data));
            showStatus('snapshotList', `‚úÖ Snapshot "${name}" creado`, 'success');
            listSnapshots();
        }

        function listSnapshots() {
            const snapshots = Object.keys(localStorage)
                .filter(key => key.startsWith('japitin-snapshot-'))
                .map(key => ({
                    key,
                    name: key.replace('japitin-snapshot-', ''),
                    data: JSON.parse(localStorage.getItem(key))
                }));

            const list = document.getElementById('snapshotList');
            if (snapshots.length === 0) {
                list.innerHTML = '<p style="color: #888; margin-top: 10px;">No hay snapshots guardados</p>';
                return;
            }

            list.innerHTML = '<ul class="file-list">' + snapshots.map(snap => `
                <li>
                    <span>${snap.name}</span>
                    <div>
                        <button class="btn-success" onclick="restoreSnapshot('${snap.key}')">‚Ü©Ô∏è Restaurar</button>
                        <button class="btn-danger" onclick="deleteSnapshot('${snap.key}')">üóëÔ∏è</button>
                    </div>
                </li>
            `).join('') + '</ul>';
        }

        function restoreSnapshot(key) {
            if (!confirm('¬øRestaurar este snapshot? (recargar√° la p√°gina)')) return;

            const data = JSON.parse(localStorage.getItem(key));
            // Aqu√≠ podr√≠as implementar la restauraci√≥n real
            alert('Snapshot restaurado (funcionalidad simulada)');
        }

        function deleteSnapshot(key) {
            if (!confirm('¬øEliminar este snapshot?')) return;
            localStorage.removeItem(key);
            listSnapshots();
        }

        // CSS Cleaner
        function analyzeCss() {
            const output = document.getElementById('cleanerOutput');
            output.style.display = 'block';
            output.innerHTML = '<pre>Analizando archivos CSS...</pre>';

            // Simulaci√≥n - en producci√≥n har√≠a fetch de archivos CSS
            setTimeout(() => {
                output.innerHTML = `<pre>
üìä An√°lisis de CSS:
- Total de archivos: 15
- Reglas duplicadas encontradas: 47
- Selectores sin usar: 23
- Tama√±o total: 245 KB
- Potencial reducci√≥n: 35%

üí° Recomendaciones:
- Consolidar wallpapers.css con main.css
- Eliminar dark-mode-overhaul.css (duplicado)
- Limpiar selectores no utilizados
</pre>`;
            }, 1000);
        }

        function cleanDuplicates() {
            if (!confirm('‚ö†Ô∏è Esto modificar√° archivos CSS. ¬øContinuar?')) return;

            alert('üöß Funcionalidad en desarrollo\nUsar con precauci√≥n en producci√≥n');
        }

        // Visual Inspector
        function inspectElement() {
            const selector = document.getElementById('inspectSelector').value;
            if (!selector) return;

            const output = document.getElementById('inspectorOutput');
            output.style.display = 'block';

            try {
                const preview = document.getElementById('preview').contentWindow.document;
                const element = preview.querySelector(selector);

                if (!element) {
                    output.innerHTML = `<div class="status error">‚ùå Elemento "${selector}" no encontrado</div>`;
                    return;
                }

                const styles = preview.defaultView.getComputedStyle(element);
                const relevantProps = ['background-color', 'background-image', 'background-size', 'color', 'display', 'position'];

                output.innerHTML = `
                    <div class="css-rule">
                        <div class="selector">${selector}</div>
                        ${relevantProps.map(prop => `
                            <div class="property">${prop}: <span>${styles.getPropertyValue(prop)}</span></div>
                        `).join('')}
                    </div>
                `;
            } catch (e) {
                output.innerHTML = `<div class="status error">‚ùå Error: ${e.message}</div>`;
            }
        }

        // Utilities
        function showStatus(elementId, message, type = 'success') {
            const el = document.getElementById(elementId);
            el.innerHTML = `<div class="status ${type}">${message}</div>`;
            setTimeout(() => {
                el.innerHTML = '';
            }, 3000);
        }

        function getAllCSS() {
            const preview = document.getElementById('preview').contentWindow.document;
            const styles = Array.from(preview.querySelectorAll('style, link[rel="stylesheet"]'));
            return styles.map(s => s.textContent || s.href).join('\n');
        }

        // Auto-reload preview on changes
        setInterval(() => {
            const preview = document.getElementById('preview');
            if (preview && preview.contentWindow) {
                // Preview se mantiene vivo
            }
        }, 5000);
    </script>
</body>
</html>
